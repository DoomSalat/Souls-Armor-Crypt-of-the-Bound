---
description: 
globs: 
alwaysApply: true
---
name: Unity Input System - New Only
priority: 90
language: csharp

rules:
  # Блокировка старой системы ввода
  - trigger:
      regex: 'Input\.(GetKey|GetKeyDown|GetKeyUp|GetButton|GetButtonDown|GetButtonUp|GetAxis|mousePosition|GetMouseButton)'
    action: reject
    message: |
      ❌ ЗАПРЕЩЕНО использовать Old Input System!
      
      ✅ Используй New Input System:
      _input.Player.Jump.performed += context => Jump();
      _input.Player.Move.performed += context => Move(context.ReadValue<Vector2>());
      
      📖 https://docs.unity3d.com/Packages/com.unity.inputsystem@latest

  # Подсказка правильного использования
  - trigger:
      code: ["new PlayerInputActions"]
    action: suggest
    message: |
      ✅ Не забудь подписаться на события и правильно очистить ресурсы:
      
      OnEnable():  _input.Player.Action.performed += context => Method();
      OnDisable(): _input.Player.Action.performed -= context => Method();
      OnDestroy(): _input?.Dispose();
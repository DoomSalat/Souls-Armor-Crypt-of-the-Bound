---
description: 
globs: 
alwaysApply: true
---
name: Unity Performance Optimizations
priority: 70
language: csharp

rules:
  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Vector.Distance
  - trigger:
      regex: 'Vector[23]\.Distance\s*\('
    action: suggest
    replacement: |
      // –ò—Å–ø–æ–ª—å–∑—É–π sqrMagnitude –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π:
      (target.position - transform.position).sqrMagnitude < distanceSquared
    message: |
      ‚ùå Vector.Distance() –º–µ–¥–ª–µ–Ω–Ω—ã–π –∏–∑-–∑–∞ sqrt()!
      
      ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π:
      ‚Ä¢ sqrMagnitude –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π
      ‚Ä¢ magnitude —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

  # –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –¥–ª—è —á–∞—Å—Ç—ã—Ö –≤—ã–∑–æ–≤–æ–≤
  - trigger:
      regex: '(FindObjectOfType|FindObjectsOfType)\s*<'
    action: suggest
    message: |
      ‚ö†Ô∏è Find –º–µ—Ç–æ–¥—ã –¥–æ—Ä–æ–≥–∏–µ –≤ Update/FixedUpdate!
      
      ‚úÖ –ö—ç—à–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
      ‚Ä¢ –°–æ—Ö—Ä–∞–Ω—è–π —Å—Å—ã–ª–∫–∏ –≤ Awake/Start
      ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π Singleton –¥–ª—è Manager –∫–ª–∞—Å—Å–æ–≤
      ‚Ä¢ –†–∞—Å—Å–º–æ—Ç—Ä–∏ —Å–æ–±—ã—Ç–∏–π–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

  # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è GetComponent
  - trigger:
      regex: 'GetComponent\s*<[^>]+>\s*\(\s*\)'
    action: suggest
    message: |
      üí° –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π GetComponent:
      ‚Ä¢ –ö—ç—à–∏—Ä—É–π –≤ Awake: _rigidbody = GetComponent<Rigidbody>();
      ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π TryGetComponent –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
      ‚Ä¢ –ò–∑–±–µ–≥–∞–π –≤ Update –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ
      
      üìñ –°–º. initialize-objectClass.mdc –¥–ª—è RequiredComponent –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è





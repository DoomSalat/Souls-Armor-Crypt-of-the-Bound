# –°–∏—Å—Ç–µ–º–∞ –ì—Ä—É–ø–ø –í—Ä–∞–≥–æ–≤ (Enemy Group System)

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø –≤—Ä–∞–≥–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –≥—Ä—É–ø–ø–∞–º–∏ –≤—Ä–∞–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤—É—é—Ç –∫–∞–∫ –µ–¥–∏–Ω–æ–µ —Ü–µ–ª–æ–µ. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø, –ø–µ—Ä–µ–¥–∞—á—É –ª–∏–¥–µ—Ä—Å—Ç–≤–∞ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. IGroupController (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
```csharp
public interface IGroupController
{
    bool IsGroupLeader { get; }
    List<IGroupController> GroupMembers { get; }
    int GroupId { get; }
    
    // –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–æ–π
    void InitializeGroup(int groupId, bool isLeader);
    void InitializeSwarm();
    void ClearGroup();
    // ... –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –≥—Ä—É–ø–ø. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—Ä—É–ø–ø–∞–º–∏.

#### 2. BaseGroupController (–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å)
```csharp
public abstract class BaseGroupController : MonoBehaviour, IGroupController
{
    // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è
    private const float RandomOffsetRange = 100f;
    private const float OptimalDistance = 2.5f;
    private const float InfluenceRadius = 4.0f;
    // ... –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
    
    // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
    protected List<IGroupController> _groupMembers;
    protected bool _isGroupLeader;
    protected int _groupId;
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: 
- –†–µ–∞–ª–∏–∑—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∞–º–∏
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –¥–≤–∏–∂–µ–Ω–∏—è —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞—á–µ–π –ª–∏–¥–µ—Ä—Å—Ç–≤–∞
- –†–µ–∞–ª–∏–∑—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–µ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è (swarm behavior)
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–º–µ—Ä—Ç—å —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã** (–Ω–æ–≤–æ–µ)

#### 3. GroupRegister (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä)
```csharp
public static class GroupRegister
{
    private static readonly Dictionary<int, Dictionary<IGroupController, List<IGroupController>>> _groups;
    private static int _nextGroupId = 1;
    
    // –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
    public static int CreateGroup(IGroupController leader, List<IGroupController> members);
    public static void RemoveGroup(int groupId);
    public static IGroupController SetRandomLeader(int groupId);
    public static void LeaderDied(int groupId);
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: 
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –≥—Ä—É–ø–ø–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID –≥—Ä—É–ø–ø
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ—Ä—Ç–∏ –ª–∏–¥–µ—Ä–∞ –≥—Ä—É–ø–ø—ã
- –ü–µ—Ä–µ–¥–∞—á–∞ –ª–∏–¥–µ—Ä—Å—Ç–≤–∞ –º–µ–∂–¥—É —á–ª–µ–Ω–∞–º–∏ –≥—Ä—É–ø–ø—ã

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª –ì—Ä—É–ø–ø—ã

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ì—Ä—É–ø–ø—ã

#### –ß–µ—Ä–µ–∑ GroupSpawnStrategy:
```csharp
// –í GroupSpawnStrategy.OnAfterSpawn()
private void CreateGroupFromSpawned()
{
    PooledEnemy leaderEnemy = _currentGroup[_currentGroup.Count - 1];
    List<IGroupController> groupMembers = new List<IGroupController>();
    
    // –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã —á–µ—Ä–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä
    int groupId = GroupRegister.CreateGroup(leader, groupMembers);
    leader.InitializeGroup(groupId, true);
}
```

#### –ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
1. **–°–æ–∑–¥–∞–Ω–∏–µ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ**: `GroupRegister.CreateGroup()` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –≥—Ä—É–ø–ø—É
2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏–¥–µ—Ä–∞**: `leader.InitializeGroup(groupId, true)` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ª–∏–¥–µ—Ä–∞
3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–ª–µ–Ω–æ–≤**: –ß–ª–µ–Ω—ã –≥—Ä—É–ø–ø—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ –ª–∏–¥–µ—Ä–∞
4. **–í–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–ª–µ–Ω–∞ –≥—Ä—É–ø–ø—ã –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—å —á–µ—Ä–µ–∑ `IFollower`

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ì—Ä—É–ø–ø–æ–π

#### –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è:
```csharp
protected virtual void ApplyGroupBehavior()
{
    Vector2 leaderPos = transform.position;
    
    foreach (var member in _groupMembers)
    {
        // –†–∞—Å—á–µ—Ç —Ü–µ–ª–µ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–ª–µ–Ω–∞
        Vector2 targetPos = GetOrCreateTargetPosition(member, leaderPos);
        
        // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –¥–≤–∏–∂–µ–Ω–∏–µ
        member.GetFollower().AddInfluence(directionToTarget, influenceStrength);
    }
}
```

#### –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–µ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è:
- **–¶–µ–ª–µ–≤–∞—è –∑–æ–Ω–∞**: –ö–∞–∂–¥—ã–π —á–ª–µ–Ω –≥—Ä—É–ø–ø—ã –∏–º–µ–µ—Ç —Å–≤–æ—é —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –≤–æ–∫—Ä—É–≥ –ª–∏–¥–µ—Ä–∞
- **–í–∏–±—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–∏**: –ü–æ–∑–∏—Ü–∏—è —Ü–µ–ª–∏ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
- **–°–∏–ª–∞ –≤–ª–∏—è–Ω–∏—è**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ –ª–∏–¥–µ—Ä–∞ –∏ —Ü–µ–ª–µ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ**: –ß–ª–µ–Ω—ã –≥—Ä—É–ø–ø—ã –∏–∑–±–µ–≥–∞—é—Ç —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –°–º–µ—Ä—Ç–∏ –ß–ª–µ–Ω–æ–≤ –ì—Ä—É–ø–ø—ã

#### –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è):
```csharp
protected virtual void OnReturnedToPool(PooledEnemy pooledEnemy)
{
    if (_isGroupLeader && _groupId > 0)
    {
        GroupRegister.LeaderDied(_groupId);
    }
    else if (_groupId > 0)
    {
        // –ï—Å–ª–∏ —ç—Ç–æ —á–ª–µ–Ω –≥—Ä—É–ø–ø—ã (–Ω–µ –ª–∏–¥–µ—Ä), —É–≤–µ–¥–æ–º–ª—è–µ–º –ª–∏–¥–µ—Ä–∞ –æ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–∞
        NotifyLeaderAboutMemberDeath();
    }

    ClearGroup();
}

protected virtual void NotifyLeaderAboutMemberDeath()
{
    var group = GroupRegister.GetGroup(_groupId);
    var leader = group.Keys.First();
    var members = group[leader];

    // –£–¥–∞–ª—è–µ–º —Å–µ–±—è –∏–∑ —Å–ø–∏—Å–∫–∞ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã
    if (members.Contains(this))
    {
        members.Remove(this);
        group[leader] = members;
        
        // –£–≤–µ–¥–æ–º–ª—è–µ–º –ª–∏–¥–µ—Ä–∞ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–æ—è
        leader.InitializeSwarm();
    }
}
```

#### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–∞ –≥—Ä—É–ø–ø—ã:
1. **–ß–ª–µ–Ω –≥—Ä—É–ø–ø—ã —É–º–∏—Ä–∞–µ—Ç** ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `OnReturnedToPool`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏**: –ï—Å–ª–∏ –Ω–µ –ª–∏–¥–µ—Ä ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `NotifyLeaderAboutMemberDeath`
3. **–£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞**: –ß–ª–µ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ
4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–ª–∞–≥–∞ –æ–∂–∏–¥–∞–Ω–∏—è**: –õ–∏–¥–µ—Ä –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ–∂–∏–¥–∞—é—â–∏–π –Ω–æ–≤–æ–≥–æ —á–ª–µ–Ω–∞
5. **–°–æ–∑–¥–∞–Ω–∏–µ –¥—É—à–∏**: –î—É—à–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É —á–µ—Ä–µ–∑ `InitializeGroup(GroupId, false)`
6. **–ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—è**: –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—É—à–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `InitializeSwarm()` —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º

### 4. –ü–µ—Ä–µ–¥–∞—á–∞ –õ–∏–¥–µ—Ä—Å—Ç–≤–∞

#### –°–ª—É—á–∞–∏ –ø–µ—Ä–µ–¥–∞—á–∏:
1. **–°–º–µ—Ä—Ç—å –ª–∏–¥–µ—Ä–∞**: `GroupRegister.LeaderDied(groupId)`
2. **–†—É—á–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞**: `TransferLeadership(newLeader)`
3. **–ü–µ—Ä–µ–¥–∞—á–∞ –≥—Ä—É–ø–ø–µ**: `TransferGroupTo(newMember)`

#### –ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–¥–∞—á–∏:
```csharp
public static void LeaderDied(int groupId)
{
    var group = _groups[groupId];
    var currentLeader = group.Keys.First();
    var members = group[currentLeader];
    
    // –í—ã–±–æ—Ä –Ω–æ–≤–æ–≥–æ –ª–∏–¥–µ—Ä–∞
    var newLeader = members[Random.Range(0, members.Count)];
    members.Remove(newLeader);
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≥—Ä—É–ø–ø—ã
    group.Remove(currentLeader);
    group[newLeader] = members;
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ª–∏–¥–µ—Ä–∞
    newLeader.InitializeGroup(groupId, true);
}
```

### 5. –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ì—Ä—É–ø–ø—ã

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ:
- –ü—Ä–∏ —Å–º–µ—Ä—Ç–∏ –≤—Å–µ—Ö —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã
- –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –≤ –ø—É–ª –æ–±—ä–µ–∫—Ç–∞
- –ü—Ä–∏ —Ä—É—á–Ω–æ–º –≤—ã–∑–æ–≤–µ `ClearGroup()`

#### –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤:
```csharp
public virtual void ClearGroup()
{
    foreach (var member in _groupMembers)
    {
        DisableMemberControl(member);
    }
    
    _groupMembers.Clear();
    _isGroupLeader = false;
    _groupId = -1;
}
```

## –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

### SoulVaseGroupController
```csharp
public class SoulVaseGroupController : BaseGroupController
{
    private void OnSoulSpawned(PooledEnemy spawnedSoul)
    {
        if (spawnedSoul.TryGetComponent<SoulGroupController>(out var soulGroupController))
        {
            if (IsGroupLeader)
            {
                // –ü–µ—Ä–µ–¥–∞—á–∞ –≥—Ä—É–ø–ø—ã –¥—É—à–µ –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –≤–∞–∑—ã
                TransferGroupIdToSuccessor(soulGroupController);
            }
            else if (GroupId > 0)
            {
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—É—à–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≥—Ä—É–ø–ø—É
                soulGroupController.InitializeGroup(GroupId, false);
            }
        }
    }
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü—Ä–∏ —Å–º–µ—Ä—Ç–∏ –≤–∞–∑—ã –≥—Ä—É–ø–ø–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥—É—à–µ
- –î—É—à–∞ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –Ω–æ–≤—ã–º –ª–∏–¥–µ—Ä–æ–º –∏–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–µ
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑–æ–≤—É—é –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã**

### SoulGroupController
```csharp
public class SoulGroupController : BaseGroupController
{
    public override bool CanControlled()
    {
        return !_soul.IsBusy;
    }
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥—É—à–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –≥—Ä—É–ø–ø–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–≥–¥–∞ –¥—É—à–∞ –∑–∞–Ω—è—Ç–∞
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑–æ–≤—É—é –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã**

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–¥–∞—á–∏ –ì—Ä—É–ø–ø

### –ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞:
**–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–∞ –≥—Ä—É–ø–ø—ã (–Ω–µ –ª–∏–¥–µ—Ä–∞) —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞ —Å–ø–∏—Å–æ–∫ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥—É—à).

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
1. –£–º–∏—Ä–∞–µ—Ç —á–ª–µ–Ω –≥—Ä—É–ø–ø—ã (–≤–∞–∑–∞) ‚Üí `OnReturnedToPool` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. –°–æ–∑–¥–∞–µ—Ç—Å—è –¥—É—à–∞ ‚Üí `OnSoulSpawned` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
3. –î—É—à–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–µ ‚Üí –Ω–æ –≥—Ä—É–ø–ø–∞ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–∞
4. –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–æ—è ‚Üí –≤–∞–∑–∞ –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞—è, –¥—É—à–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
1. –£–º–∏—Ä–∞–µ—Ç —á–ª–µ–Ω –≥—Ä—É–ø–ø—ã (–≤–∞–∑–∞) ‚Üí `NotifyLeaderAboutMemberDeath` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. –ß–ª–µ–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞ –≥—Ä—É–ø–ø—ã –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ
3. –õ–∏–¥–µ—Ä –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ–∂–∏–¥–∞—é—â–∏–π –Ω–æ–≤–æ–≥–æ —á–ª–µ–Ω–∞ (`_waitingForNewMember = true`)
4. –°–æ–∑–¥–∞–µ—Ç—Å—è –¥—É—à–∞ ‚Üí `OnSoulSpawned` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
5. –î—É—à–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –≥—Ä—É–ø–ø—É —á–µ—Ä–µ–∑ `InitializeGroup(GroupId, false)`
6. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—É—à–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–ª–∞–≥ –æ–∂–∏–¥–∞–Ω–∏—è –∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `InitializeSwarm`
7. –î—É—à–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º —á–ª–µ–Ω–æ–º –≥—Ä—É–ø–ø—ã

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. **–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `NotifyLeaderAboutMemberDeath()`** –≤ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `OnReturnedToPool()`** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã
3. **–î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ –æ–∂–∏–¥–∞–Ω–∏—è** - `_waitingForNewMember` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥—Ä—É–ø–ø—ã
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤** - `InitializeSwarm()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —á–ª–µ–Ω–∞
5. **–£–ø—Ä–æ—â–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** - —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
6. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ

## –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –°–∏—Å—Ç–µ–º—ã

### ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –†–∞–±–æ—Ç–∞–µ—Ç –°—Ç–∞–±–∏–ª—å–Ω–æ**

–°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø –≤—Ä–∞–≥–æ–≤ –±—ã–ª–∞ —É—Å–ø–µ—à–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ–¥—Ä–∞–≥–∏–≤–∞–Ω–∏–π. –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±—ã–ª–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã, –∏ –¥–≤–∏–∂–µ–Ω–∏–µ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã —Å—Ç–∞–ª–æ –ø–ª–∞–≤–Ω—ã–º –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º.

### ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

#### 1. **LinearFollower.cs** - –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ‚úÖ
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –£–±—Ä–∞–Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –º–∞–ª–æ–º –≤–ª–∏—è–Ω–∏–∏ –≤ —Ä–µ–∂–∏–º–µ `_controlOverridden`
- –ü—Ä–∏ –º–∞–ª–æ–º –≤–ª–∏—è–Ω–∏–∏ (`< 0.01f`) –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º –≤–ª–∏—è–Ω–∏–µ - rigidbody –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ –∏–Ω–µ—Ä—Ü–∏–∏
- –í–ª–∏—è–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `_controlOverridden = true`
- –ü—Ä–∏ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ (`_controlOverridden = false`) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø–æ–¥—Ä–∞–≥–∏–≤–∞–Ω–∏–π

#### 2. **ForceFollower.cs** - –ö–û–ù–°–ò–°–¢–ï–ù–¢–ù–û–°–¢–¨ ‚úÖ
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞–ª–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –ø—Ä–∏ `_controlOverridden = true`
- –£–±—Ä–∞–Ω—ã –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ Lerp –æ–ø–µ—Ä–∞—Ü–∏–∏
- –í–ª–∏—è–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `_controlOverridden = true`

#### 3. **BaseGroupController.cs** - –£–õ–£–ß–®–ï–ù–ò–ï ‚úÖ
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `ApplyInfluenceToMember()` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å–∏–ª—ã –≤–ª–∏—è–Ω–∏—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∏–ª–∞ –≤–ª–∏—è–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `MinInfluenceStrength = 0.1f`
- –ó–∞–º–µ–Ω–µ–Ω –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ `AddInfluence()` –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –º–µ—Ç–æ–¥

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–∑–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–≤–∏–∂–µ–Ω–∏–∏

### üéØ **–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï**
–°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø –≤—Ä–∞–≥–æ–≤:
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ–¥—Ä–∞–≥–∏–≤–∞–Ω–∏–π**
- ‚úÖ **–î–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∞–≤–Ω–æ–µ –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ**
- ‚úÖ **–ß–ª–µ–Ω—ã –≥—Ä—É–ø–ø—ã –¥–≤–∏–≥–∞—é—Ç—Å—è –ø–æ –∏–Ω–µ—Ä—Ü–∏–∏ –ø—Ä–∏ –º–∞–ª–æ–º –≤–ª–∏—è–Ω–∏–∏**
- ‚úÖ **–ù–µ—Ç —Ä–µ–∑–∫–∏—Ö –æ—Å—Ç–∞–Ω–æ–≤–æ–∫ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏–π**
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —Ä–∞–±–æ—Ç–∞**

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ü–æ–≤–µ–¥–µ–Ω–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥—Ä—É–ø–ø—ã:
```csharp
[Header("Swarm Zone Settings")]
[SerializeField] protected float _optimalDistance = 2.5f;      // –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –ª–∏–¥–µ—Ä–∞
[SerializeField] protected float _targetZoneRadius = 0.8f;    // –†–∞–¥–∏—É—Å —Ü–µ–ª–µ–≤–æ–π –∑–æ–Ω—ã
[SerializeField] protected float _dangerZoneRadius = 1.2f;    // –†–∞–¥–∏—É—Å –æ–ø–∞—Å–Ω–æ–π –∑–æ–Ω—ã
[SerializeField] protected float _influenceRadius = 4.0f;     // –†–∞–¥–∏—É—Å –≤–ª–∏—è–Ω–∏—è –ª–∏–¥–µ—Ä–∞

[Header("Movement Settings")]
[SerializeField] protected float _targetWobbleSpeed = 1.5f;   // –°–∫–æ—Ä–æ—Å—Ç—å –≤–∏–±—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–ª–∏
[SerializeField] protected float _separationForce = 4f;       // –°–∏–ª–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —á–ª–µ–Ω–æ–≤
```

### –û—Ç–ª–∞–¥–∫–∞:
```csharp
[Header("Debug")]
[SerializeField] private bool _showZonesInEditor = true;
[SerializeField, ReadOnly] private bool _debugIsGroupLeader;
[SerializeField, ReadOnly] private int _debugGroupMembersCount;
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –°–∏—Å—Ç–µ–º–æ–π –°–ø–∞–≤–Ω–∞

### GroupSpawnStrategy:
```csharp
public class GroupSpawnStrategy : SimpleSpawnStrategy
{
    private Vector2Int _groupSizeRange = new Vector2Int(2, 5);
    private float _minDistanceFromLeader = 1.0f;
    private float _maxDistanceFromLeader = 2.5f;
}
```

**–§—É–Ω–∫—Ü–∏–∏**:
- –°–æ–∑–¥–∞–µ—Ç –≥—Ä—É–ø–ø—ã –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
- –†–∞–∑–º–µ—â–∞–µ—Ç —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã –≤–æ–∫—Ä—É–≥ –ª–∏–¥–µ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥—Ä—É–ø–ø—É –ø–æ—Å–ª–µ —Å–ø–∞–≤–Ω–∞ –≤—Å–µ—Ö —á–ª–µ–Ω–æ–≤

## –õ—É—á—à–∏–µ –ü—Ä–∞–∫—Ç–∏–∫–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≥—Ä—É–ø–ø—ã:
```csharp
[RequireComponent(typeof(YourEnemyType))]
public class YourGroupController : BaseGroupController
{
    [SerializeField, Required] private YourEnemyType _enemy;
    
    public override bool CanControlled()
    {
        return !_enemy.IsBusy; // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
    }
    
    protected override bool ShouldSkipGroupBehavior()
    {
        return !CanControlled();
    }
}
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:
```csharp
protected override void OnEnable()
{
    base.OnEnable();
    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
}

protected override void OnDisable()
{
    // –û—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–±—ã—Ç–∏–π
    base.OnDisable();
}
```

### 3. –ü–µ—Ä–µ–¥–∞—á–∞ –≥—Ä—É–ø–ø—ã:
```csharp
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É
if (IsGroupLeader)
{
    TransferGroupIdToSuccessor(newController);
}
else if (GroupId > 0)
{
    newController.InitializeGroup(GroupId, false);
}
```

## –û—Ç–ª–∞–¥–∫–∞ –∏ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:
- –ó–µ–ª–µ–Ω—ã–π –∫—Ä—É–≥: –†–∞–¥–∏—É—Å –≤–ª–∏—è–Ω–∏—è –ª–∏–¥–µ—Ä–∞
- –°–∏–Ω–∏–π –∫—Ä—É–≥: –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
- –ö—Ä–∞—Å–Ω—ã–π –∫—Ä—É–≥: –û–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞
- –¶–≤–µ—Ç–Ω—ã–µ –ª–∏–Ω–∏–∏: –°–≤—è–∑–∏ –º–µ–∂–¥—É –ª–∏–¥–µ—Ä–æ–º –∏ —á–ª–µ–Ω–∞–º–∏ –≥—Ä—É–ø–ø—ã

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
- –°–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø
- –ü–µ—Ä–µ–¥–∞—á–∏ –ª–∏–¥–µ—Ä—Å—Ç–≤–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —á–ª–µ–Ω–æ–≤
- **–°–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã** (–Ω–æ–≤–æ–µ)
- –û—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤:
```
[BaseGroupController] NotifyLeaderAboutMemberDeath: Removed Soul vase (game) [Yellow](Clone) from group 1
[BaseGroupController] NotifyLeaderAboutMemberDeath: Leader Leader (game) [Red](Clone) waiting for new member
[BaseGroupController] InitializeGroup: Soul [Yellow](Clone) (not leader) adding self to group 1 led by Leader (game) [Red](Clone)
[BaseGroupController] InitializeGroup: Soul [Yellow](Clone) successfully added to group 1
[BaseGroupController] InitializeGroup: Soul [Yellow](Clone) triggering swarm reinitialization for waiting leader Leader (game) [Red](Clone)
[BaseGroupController] InitializeSwarm: Leader Leader (game) [Red](Clone) initializing swarm with 2 members
[BaseGroupController] InitializeSwarm: Added active member Soul [Yellow](Clone)
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sqrMagnitude` –≤–º–µ—Å—Ç–æ `magnitude` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `FixedUpdate`
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–º–µ—Ä—Ç–∏ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã** (–Ω–æ–≤–æ–µ)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2-8 —á–ª–µ–Ω–æ–≤)
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–¥–∏—É—Å—ã –≤–ª–∏—è–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≤—Ä–∞–≥–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–ª–∏–Ω–≥ –¥–ª—è —á–∞—Å—Ç–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è/—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—è –≥—Ä—É–ø–ø
- **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –≥—Ä—É–ø–ø**

# Knight Enemy - –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

## üéØ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
–†—ã—Ü–∞—Ä—å-–≤—Ä–∞–≥ —Å –º–µ—Ö–∞–Ω–∏–∫–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –º–µ—á–∞ –∏–≥—Ä–æ–∫–∞. –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç.

## üöÄ –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. üíÄ –°–∏—Å—Ç–µ–º–∞ —Å–º–µ—Ä—Ç–∏ —Å –¥—É—à–∞–º–∏

#### 1.1 –°–∏—Å—Ç–µ–º–∞ —Ü–≤–µ—Ç–æ–≤—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—Ä–∞–≥–∞** –æ–Ω —É–∂–µ –∑–Ω–∞–µ—Ç –Ω–∞ –∫–∞–∫–∏–µ –¥—É—à–∏ —Ä–∞—Å–ø–∞–¥–µ—Ç—Å—è
- **3 —Ç–æ—á–∫–∏ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è:** –º–µ—á, –≥–æ–ª–æ–≤–∞, —Ç–µ–ª–æ
- **–ú–µ—á –∏ –≥–æ–ª–æ–≤–∞** –∏–º–µ—é—Ç —Ü–≤–µ—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥—É—à–∞–º
- **–¶–≤–µ—Ç –º–µ—á–∞** –æ—Ç—Ä–∞–∂–∞–µ—Ç –¥—É—à—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ—è–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –µ–≥–æ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è

#### 1.2 –ê–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ—Ä—Ç–∏
- **–ü–µ—Ä–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏** - –±–∞–∑–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ —Ä—ã—Ü–∞—Ä—è
- **–í—Ç–æ—Ä–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è —Ç–µ–ª–∞
- **–ú–µ—á –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ** –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏

#### 1.3 –ü–æ–≤–µ–¥–µ–Ω–∏–µ –º–µ—á–∞ –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏
- **–ü—Ä–∏ —Å–º–µ—Ä—Ç–∏ —Ä—ã—Ü–∞—Ä—è –º–µ—á –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ**
- **–ß–µ—Ä–µ–∑ 2-3 —Å–µ–∫—É–Ω–¥—ã –º–µ—á –∏—Å—á–µ–∑–∞–µ—Ç (fade out —ç—Ñ—Ñ–µ–∫—Ç)**
- **–ù–∞ –º–µ—Å—Ç–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –º–µ—á–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥—É—à–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º**

#### 1.4 –î—É—à–∏ –∏–∑ —Ç–µ–ª–∞ —Ä—ã—Ü–∞—Ä—è
- **–ß–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ –≤—Ç–æ—Ä–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏ (1-2 —Å–µ–∫—É–Ω–¥—ã)**
- **–ò–∑ –≥–æ–ª–æ–≤—ã —Ä—ã—Ü–∞—Ä—è –≤—ã—Ö–æ–¥–∏—Ç –¥—É—à–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º**
- **–ò–∑ —Ç–µ–ª–∞ —Ä—ã—Ü–∞—Ä—è –≤—ã—Ö–æ–¥–∏—Ç –¥—É—à–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º**
- **–î—É—à–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–æ—á–∫–∞—Ö (–≥–æ–ª–æ–≤–∞, —Ç–µ–ª–æ)**

#### 1.5 –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –¥—É—à
```csharp
// –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class KnightSoulConfiguration : MonoBehaviour
{
    [Header("Soul Configuration")]
    [SerializeField] private SoulType swordSoulType;
    [SerializeField] private SoulType headSoulType;
    [SerializeField] private SoulType bodySoulType;
    
    [Header("Visual Components")]
    [SerializeField, Required] private KnightSwordVisual _knightSwordVisual;
    [SerializeField, Required] private KnightHeadVisual _knightHeadVisual;
    
    [Header("Available Soul Types")]
    [SerializeField] private SoulType[] availableSoulTypes = { 
        SoulType.Red, SoulType.Blue, SoulType.Green, SoulType.Yellow 
    };
    
    public SoulType SwordSoulType => swordSoulType;
    public SoulType HeadSoulType => headSoulType;
    public SoulType BodySoulType => bodySoulType;
    
    private void Start()
    {
        // –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—Ä–∞–≥–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø—ã –¥—É—à
        ConfigureSoulTypes();
        ApplyVisualEffects();
    }
    
    private void ConfigureSoulTypes()
    {
        // –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º —Ç–∏–ø—ã –¥—É—à –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
        swordSoulType = GetRandomSoulType();
        headSoulType = GetRandomSoulType();
        bodySoulType = GetRandomSoulType();
    }
    
    private void ApplyVisualEffects()
    {
        // –ü—Ä–∏–º–µ–Ω—è–µ–º SoulMaterialApplier –∫ –º–µ—á—É –∏ –≥–æ–ª–æ–≤–µ
        _knightSwordVisual.SetSoulType(swordSoulType);
        _knightHeadVisual.SetSoulType(headSoulType);
    }
    
    private SoulType GetRandomSoulType()
    {
        if (availableSoulTypes == null || availableSoulTypes.Length == 0)
            return SoulType.Red; // Fallback
            
        return availableSoulTypes[Random.Range(0, availableSoulTypes.Length)];
    }
}
```

### 2. üé® –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

#### 2.1 –¶–≤–µ—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –º–µ—á–∞ –∏ –≥–æ–ª–æ–≤—ã
```csharp
// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π SoulMaterialApplier
public class KnightSwordVisual : MonoBehaviour
{
    [SerializeField, Required] private SoulMaterialApplier _soulMaterialApplier;
    [SerializeField] private ParticleSystem swordGlowEffect;
    
    private SoulType _currentSoulType;
    
    public void SetSoulType(SoulType soulType)
    {
        _currentSoulType = soulType;
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª –¥—É—à–∏ –∫ —Å–ø—Ä–∞–π—Ç–∞–º –∏ —á–∞—Å—Ç–∏—Ü–∞–º
        _soulMaterialApplier.ApplySoul(soulType);
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è
        if (swordGlowEffect != null)
        {
            var main = swordGlowEffect.main;
            var soulColor = GetSoulColor(soulType);
            main.startColor = soulColor;
        }
    }
    
    public void ResetToOriginalMaterials()
    {
        _soulMaterialApplier.ResetToOriginalMaterials();
    }
    
    public SoulType GetCurrentSoulType()
    {
        return _currentSoulType;
    }
    
    private Color GetSoulColor(SoulType soulType)
    {
        // –ü–æ–ª—É—á–∞–µ–º —Ü–≤–µ—Ç –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥—É—à
        return SoulMaterialConfig.InstanceGame.GetMaterial(soulType).color;
    }
}

public class KnightHeadVisual : MonoBehaviour
{
    [SerializeField, Required] private SoulMaterialApplier _soulMaterialApplier;
    [SerializeField] private ParticleSystem headGlowEffect;
    
    private SoulType _currentSoulType;
    
    public void SetSoulType(SoulType soulType)
    {
        _currentSoulType = soulType;
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª –¥—É—à–∏ –∫ —Å–ø—Ä–∞–π—Ç–∞–º –∏ —á–∞—Å—Ç–∏—Ü–∞–º
        _soulMaterialApplier.ApplySoul(soulType);
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è
        if (headGlowEffect != null)
        {
            var main = headGlowEffect.main;
            var soulColor = GetSoulColor(soulType);
            main.startColor = soulColor;
        }
    }
    
    public void ResetToOriginalMaterials()
    {
        _soulMaterialApplier.ResetToOriginalMaterials();
    }
    
    public SoulType GetCurrentSoulType()
    {
        return _currentSoulType;
    }
    
    private Color GetSoulColor(SoulType soulType)
    {
        // –ü–æ–ª—É—á–∞–µ–º —Ü–≤–µ—Ç –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥—É—à
        return SoulMaterialConfig.InstanceGame.GetMaterial(soulType).color;
    }
}
```

#### 2.2 –≠—Ñ—Ñ–µ–∫—Ç –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –º–µ—á–∞
```csharp
// –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class SwordDeathEffect : MonoBehaviour
{
    [SerializeField] private float fadeDuration = 2f;
    [SerializeField] private ParticleSystem swordDisappearEffect;
    
    public void StartSwordDisappear(Vector3 swordPosition, Color soulColor)
    {
        // Fade out –º–µ—á–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–∞ –¥—É—à–∏
        // –ó–∞–ø—É—Å–∫ —ç—Ñ—Ñ–µ–∫—Ç–∞ —á–∞—Å—Ç–∏—Ü —Å —Ü–≤–µ—Ç–æ–º –¥—É—à–∏
        // –°–æ–∑–¥–∞–Ω–∏–µ –¥—É—à–∏ –Ω–∞ –º–µ—Å—Ç–µ –º–µ—á–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º
    }
}
```

#### 2.3 –≠—Ñ—Ñ–µ–∫—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è –¥—É—à
```csharp
// –ü–ª–∞–Ω–∏—Ä—É–µ–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
public class SoulSpawnEffect : MonoBehaviour
{
    [SerializeField] private float soulSpawnDelay = 1.5f;
    [SerializeField] private float spawnRadius = 1f;
    
    [Header("Soul Prefabs")]
    [SerializeField] private GameObject soulPrefab; // –ë–∞–∑–æ–≤—ã–π –ø—Ä–µ—Ñ–∞–± –¥—É—à–∏
    
    public void SpawnSoulFromHead(Vector3 headPosition, SoulType soulType)
    {
        // –°–æ–∑–¥–∞–Ω–∏–µ –¥—É—à–∏ –∏–∑ –≥–æ–ª–æ–≤—ã —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º
        GameObject soulInstance = Instantiate(soulPrefab, headPosition, Quaternion.identity);
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º SoulMaterialApplier –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥—É—à–µ
        if (soulInstance.TryGetComponent<SoulMaterialApplier>(out var soulApplier))
        {
            soulApplier.ApplySoul(soulType);
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—è–≤–ª–µ–Ω–∏—è
        StartSpawnEffects(soulInstance, soulType);
    }
    
    public void SpawnSoulFromBody(Vector3 bodyPosition, SoulType soulType)
    {
        // –°–æ–∑–¥–∞–Ω–∏–µ –¥—É—à–∏ –∏–∑ —Ç–µ–ª–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º
        GameObject soulInstance = Instantiate(soulPrefab, bodyPosition, Quaternion.identity);
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º SoulMaterialApplier –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥—É—à–µ
        if (soulInstance.TryGetComponent<SoulMaterialApplier>(out var soulApplier))
        {
            soulApplier.ApplySoul(soulType);
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—è–≤–ª–µ–Ω–∏—è
        StartSpawnEffects(soulInstance, soulType);
    }
    
    public void SpawnSoulFromSword(Vector3 swordPosition, SoulType soulType)
    {
        // –°–æ–∑–¥–∞–Ω–∏–µ –¥—É—à–∏ –∏–∑ –º–µ—á–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º
        GameObject soulInstance = Instantiate(soulPrefab, swordPosition, Quaternion.identity);
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º SoulMaterialApplier –∫ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥—É—à–µ
        if (soulInstance.TryGetComponent<SoulMaterialApplier>(out var soulApplier))
        {
            soulApplier.ApplySoul(soulType);
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—è–≤–ª–µ–Ω–∏—è
        StartSpawnEffects(soulInstance, soulType);
    }
    
    private void StartSpawnEffects(GameObject soulInstance, SoulType soulType)
    {
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è –¥—É—à–∏
        // –≠—Ñ—Ñ–µ–∫—Ç—ã —á–∞—Å—Ç–∏—Ü —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ü–≤–µ—Ç–æ–º
        // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
    }
}
```

### 3. üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 3.1 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è Knight.cs
```csharp
// –î–æ–±–∞–≤–∏—Ç—å –≤ OnDeathRequested
private void OnDeathRequested(DamageData damageData)
{
    _animator.PlayDeath();
    _follower.DisableMovement();
    _damage.DisableCollisions();
    
    // –ù–û–í–û–ï: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–µ—á –Ω–∞ –º–µ—Å—Ç–µ
    _knightSword.StopOnDeath();
    
    // –ù–û–í–û–ï: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ—Ä—Ç–∏ —Å –¥–≤—É–º—è –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
    _deathSequence.StartDeathSequence();
}
```

#### 3.2 –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è KnightSword.cs
```csharp
// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
public void StopOnDeath()
{
    _isBlockingEnabled = false;
    _target = null;
    _rigidbody.linearVelocity = Vector2.zero;
    _rigidbody.angularVelocity = 0f;
    
    // –ó–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
    _swordDeathEffect.StartDisappear();
}

public void StartDisappearEffect()
{
    // Fade out –∞–Ω–∏–º–∞—Ü–∏—è
    // –≠—Ñ—Ñ–µ–∫—Ç —á–∞—Å—Ç–∏—Ü
    // –°–æ–∑–¥–∞–Ω–∏–µ –¥—É—à–∏ –Ω–∞ –º–µ—Å—Ç–µ
}
```

### 4. üéÆ –°–∏—Å—Ç–µ–º–∞ –¥—É—à

#### 4.1 KnightDeathSequence.cs
```csharp
[RequireComponent(typeof(Knight))]
public class KnightDeathSequence : MonoBehaviour
{
    [Header("Death Animation Settings")]
    [SerializeField] private float secondDeathDelay = 1f;
    [SerializeField] private float headSoulDelay = 1.5f;
    [SerializeField] private float bodySoulDelay = 1.8f;
    [SerializeField] private float swordSoulDelay = 2f;
    
    [Header("Spawn Points")]
    [SerializeField] private Transform headSpawnPoint;
    [SerializeField] private Transform bodySpawnPoint;
    
    private Knight _knight;
    private KnightAnimator _animator;
    private KnightSword _knightSword;
    private KnightSoulConfiguration _soulConfig;
    private SoulSpawnEffect _soulSpawnEffect;
    
    public void StartDeathSequence()
    {
        StartCoroutine(DeathSequenceCoroutine());
    }
    
    private IEnumerator DeathSequenceCoroutine()
    {
        // 1. –ü–µ—Ä–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω–∞ –≤ Knight.cs
        
        // 2. –ñ–¥–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –≤—Ç–æ—Ä—É—é –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏
        yield return new WaitForSeconds(secondDeathDelay);
        _animator.PlaySecondDeath();
        
        // 3. –ñ–¥–µ–º –∏ —Å–æ–∑–¥–∞–µ–º –¥—É—à—É –∏–∑ –≥–æ–ª–æ–≤—ã
        yield return new WaitForSeconds(headSoulDelay);
        _soulSpawnEffect.SpawnSoulFromHead(
            headSpawnPoint.position, 
            _soulConfig.HeadSoulType
        );
        
        // 4. –ñ–¥–µ–º –∏ —Å–æ–∑–¥–∞–µ–º –¥—É—à—É –∏–∑ —Ç–µ–ª–∞
        yield return new WaitForSeconds(bodySoulDelay);
        _soulSpawnEffect.SpawnSoulFromBody(
            bodySpawnPoint.position, 
            _soulConfig.BodySoulType
        );
        
        // 5. –ñ–¥–µ–º –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –º–µ—á–∞ –∏ —Å–æ–∑–¥–∞–µ–º –¥—É—à—É –º–µ—á–∞
        yield return new WaitForSeconds(swordSoulDelay);
        _soulSpawnEffect.SpawnSoulFromSword(
            _knightSword.transform.position, 
            _soulConfig.SwordSoulType
        );
    }
}
```

### 5. üìã –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### üéØ **–≠–¢–ê–ü 1: –í—Ç–æ—Ä–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ (1 —á–∞—Å)**
- [ ] **–°–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä—É—é –∞–Ω–∏–º–∞—Ü–∏—é —Å–º–µ—Ä—Ç–∏** –≤ Animator Controller
- [ ] **–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä** `SecondDeath` –≤ KnightAnimatorData
- [ ] **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥** `PlaySecondDeath()` –≤ KnightAnimator
- [ ] **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –∞–Ω–∏–º–∞—Ü–∏—é –≤ –∏–≥—Ä–µ

#### üéØ **–≠–¢–ê–ü 2: –ü–æ—Ä—è–¥–æ–∫ –ª–æ–≥–∏–∫–∏ —Å–º–µ—Ä—Ç–∏ (1.5 —á–∞—Å–∞)**
- [ ] **–°–æ–∑–¥–∞—Ç—å KnightSoulConfiguration** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥—É—à –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- [ ] **–°–æ–∑–¥–∞—Ç—å KnightDeathSequence** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Å–º–µ—Ä—Ç–∏
- [ ] **–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å Knight.cs** - –∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –¥—É—à –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏
- [ ] **–°–æ–∑–¥–∞—Ç—å KnightSwordVisual –∏ KnightHeadVisual** - —Ü–≤–µ—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- [ ] **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –ø–æ–ª–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ—Ä—Ç–∏

#### üéØ **–≠–¢–ê–ü 3: –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (1 —á–∞—Å)**
- [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å SoulMaterialApplier** –Ω–∞ –º–µ—á–µ –∏ –≥–æ–ª–æ–≤–µ —Ä—ã—Ü–∞—Ä—è
- [ ] **–°–æ–∑–¥–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –º–µ—á–∞** —Å fade out
- [ ] **–°–æ–∑–¥–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—è–≤–ª–µ–Ω–∏—è –¥—É—à** –≤ –Ω—É–∂–Ω—ã—Ö —Ç–æ—á–∫–∞—Ö
- [ ] **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

#### üéØ **–≠–¢–ê–ü 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–ø–∞–≤–Ω–µ—Ä—ã (30 –º–∏–Ω)**
- [ ] **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∞–± —Ä—ã—Ü–∞—Ä—è** –≤ —Å–ø–∞–≤–Ω–µ—Ä—ã (EnemyPrefabByKind)
- [ ] **–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥** –≤ SpawnerBase.ChooseKindWeightedByTokens()
- [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞** –¥–ª—è EnemyKind.Knight –≤ SpawnerTokens
- [ ] **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–ø–∞–≤–Ω–∞ —Ä—ã—Ü–∞—Ä—è –≤ –∏–≥—Ä–µ

### 6. üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

#### 6.1 –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–∞–π–º–∏–Ω–≥–æ–≤
```csharp
[Header("Death Animation Timing")]
[SerializeField] private float secondDeathDelay = 1f;      // –ó–∞–¥–µ—Ä–∂–∫–∞ –≤—Ç–æ—Ä–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–º–µ—Ä—Ç–∏
[SerializeField] private float headSoulDelay = 1.5f;       // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥—É—à–∏ –∏–∑ –≥–æ–ª–æ–≤—ã
[SerializeField] private float bodySoulDelay = 1.8f;       // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥—É—à–∏ –∏–∑ —Ç–µ–ª–∞
[SerializeField] private float swordSoulDelay = 2f;        // –ó–∞–¥–µ—Ä–∂–∫–∞ –¥—É—à–∏ –º–µ—á–∞
[SerializeField] private float swordFadeDuration = 1f;     // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –º–µ—á–∞
```

#### 6.2 –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥—É—à
```csharp
[Header("Soul Settings")]
[SerializeField] private float spawnRadius = 1f;           // –†–∞–¥–∏—É—Å –ø–æ—è–≤–ª–µ–Ω–∏—è –¥—É—à
[SerializeField] private SoulType[] availableSoulTypes;    // –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–ø—ã –¥—É—à
[SerializeField] private Color[] soulColors;               // –¶–≤–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥—É—à–∏
[SerializeField] private GameObject[] soulPrefabs;         // –ü—Ä–µ—Ñ–∞–±—ã –¥—É—à –ø–æ —Ç–∏–ø–∞–º
```

#### 6.3 –¶–≤–µ—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
```csharp
[Header("Visual Effects")]
[SerializeField] private float glowIntensity = 1.5f;       // –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Å–≤–µ—á–µ–Ω–∏—è
[SerializeField] private float glowPulseSpeed = 2f;        // –°–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏ —Å–≤–µ—á–µ–Ω–∏—è
[SerializeField] private Color glowColor = Color.white;    // –¶–≤–µ—Ç —Å–≤–µ—á–µ–Ω–∏—è
[SerializeField] private Material swordGlowMaterial;       // –ú–∞—Ç–µ—Ä–∏–∞–ª —Å–≤–µ—á–µ–Ω–∏—è –º–µ—á–∞
[SerializeField] private Material headGlowMaterial;        // –ú–∞—Ç–µ—Ä–∏–∞–ª —Å–≤–µ—á–µ–Ω–∏—è –≥–æ–ª–æ–≤—ã
```

### 7. üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

#### 7.1 –°–∏—Å—Ç–µ–º–∞ –ø—É–ª–∞ –æ–±—ä–µ–∫—Ç–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å EnemyPool –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥—É—à
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ/—É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤

#### 7.2 –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ–±—ã—Ç–∏—è DeathRequested/DeathCompleted
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

### 8. üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. **–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—Ä–∞–≥–∞** ‚Üí –º–µ—á –∏ –≥–æ–ª–æ–≤–∞ –ø–æ–ª—É—á–∞—é—Ç —Ü–≤–µ—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥—É—à
2. **–†—ã—Ü–∞—Ä—å —É–º–∏—Ä–∞–µ—Ç** ‚Üí –ø–µ—Ä–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏
3. **–ú–µ—á –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** ‚Üí –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ —Å —Ü–≤–µ—Ç–æ–≤—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º
4. **–ß–µ—Ä–µ–∑ 1 —Å–µ–∫** ‚Üí –≤—Ç–æ—Ä–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏ (—Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ —Ç–µ–ª–∞)
5. **–ß–µ—Ä–µ–∑ 1.5 —Å–µ–∫** ‚Üí –∏–∑ –≥–æ–ª–æ–≤—ã –≤—ã—Ö–æ–¥–∏—Ç –¥—É—à–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º
6. **–ß–µ—Ä–µ–∑ 1.8 —Å–µ–∫** ‚Üí –∏–∑ —Ç–µ–ª–∞ –≤—ã—Ö–æ–¥–∏—Ç –¥—É—à–∞ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Ü–≤–µ—Ç–æ–º
7. **–ß–µ—Ä–µ–∑ 2 —Å–µ–∫** ‚Üí –º–µ—á –∏—Å—á–µ–∑–∞–µ—Ç, –Ω–∞ –µ–≥–æ –º–µ—Å—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥—É—à–∞ —Å —Ü–≤–µ—Ç–æ–º –º–µ—á–∞
8. **–í–∏–∑—É–∞–ª—å–Ω–æ –∫—Ä–∞—Å–∏–≤–∞—è** —Å—Ü–µ–Ω–∞ —Å–º–µ—Ä—Ç–∏ —Å —Ü–≤–µ—Ç–æ–≤—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º–∏ –¥—É—à–∞–º–∏

### 9. üìù –ó–∞–º–µ—Ç–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### ‚úÖ **–£–ñ–ï –ì–û–¢–û–í–û:**
- EnemyKind.Knight —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
- SpawnerBase —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Knight —á–µ—Ä–µ–∑ InitializeComponents()
- SoulType enum –∏ SoulMaterialApplier –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ü—Ä–µ—Ñ–∞–± —Ä—ã—Ü–∞—Ä—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: Knight (game).prefab

#### ‚ö° **–ë–´–°–¢–†–ê–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø:**
1. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∞–± –≤ —Å–ø–∞–≤–Ω–µ—Ä—ã** - –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å Knight (game).prefab –≤ EnemyPrefabByKind —Å EnemyKind.Knight
2. **–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥** –≤ SpawnerBase.ChooseKindWeightedByTokens() –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è Knight
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞** –≤ SpawnerTokens –¥–ª—è EnemyKind.Knight

#### üéØ **–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö –ó–ê–î–ê–ß:**

**1Ô∏è‚É£ –°–ù–ê–ß–ê–õ–ê - –í—Ç–æ—Ä–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Å–º–µ—Ä—Ç–∏:**
- –°–æ–∑–¥–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –≤ Animator Controller
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä SecondDeath
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ PlaySecondDeath()
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é

**2Ô∏è‚É£ –ü–û–¢–û–ú - –ü–æ—Ä—è–¥–æ–∫ –ª–æ–≥–∏–∫–∏ —Å–º–µ—Ä—Ç–∏:**
- KnightSoulConfiguration (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥—É—à –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)
- KnightDeathSequence (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é)
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è Knight.cs (–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –¥—É—à)
- KnightSwordVisual –∏ KnightHeadVisual (—Ü–≤–µ—Ç–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã)

**3Ô∏è‚É£ –ó–ê–¢–ï–ú - –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SoulMaterialApplier
- –≠—Ñ—Ñ–µ–∫—Ç—ã –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è –º–µ—á–∞
- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø–æ—è–≤–ª–µ–Ω–∏—è –¥—É—à

**4Ô∏è‚É£ –í –ö–û–ù–¶–ï - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–ø–∞–≤–Ω–µ—Ä—ã:**
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Ñ–∞–±–∞ –≤ —Å–ø–∞–≤–Ω–µ—Ä—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Å–æ–≤
- –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥
- –°–ª–µ–¥–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤—Ä–∞–≥–æ–≤
- –û–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å EnemyPool

---

**–°—Ç–∞—Ç—É—Å:** üìã –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –í—ã—Å–æ–∫–∏–π  
**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 4 —á–∞—Å–∞ (–±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º –∏ –≥–æ—Ç–æ–≤–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
